--- Índices recomendados
1) Users
- email: lookup único por login/recuperação (alta seletividade) -> único
- location: buscas por proximidade -> 2dsphere
Justificativa:
- email: consultas frequentes por email (login, recuperação, verificação). Alta seletividade -> índice único.
- location: necessário para buscas geoespaciais (produtos/usuários próximos).

2) Categories
- name: busca por nome/categoria (poucas escritas, muitas leituras)
Justificativa:
- otimiza lookup por nome/categoria; cardinalidade média-baixa, mas operações de leitura frequentes.

3) Products
- categoryId: filtrar produtos por categoria
- sellerId: relatórios por vendedor / consultas do vendedor
- location: geolocalização para buscar por proximidade
- text index em name + description: buscas de texto completo
- compound (categoryId, price): filtrar por categoria e ordenar/filtrar por preço eficientemente
Justificativa:
- categoryId e sellerId: consultas e agregações por categoria/vendedor (muito usadas em listagens e relatórios).
- 2dsphere: busca por proximidade é requisito funcional (Sprint 2).
- text: pesquisa por termos em nome/descrição.
- compound categoryId+price: melhora filtros por categoria com ordenação/intervalos de preço.

4) Reviews
- productId: recuperar todas as avaliações de um produto
- userId: histórico do usuário
- productId + rating: agregações de média por produto
Justificativa:
- productId: consulta frequente (mostrar avaliações em página de produto) e agregações (média).
- userId: histórico e moderação.
- combinação productId+rating melhora agregações que filtram por produto e ordenam por rating/date.

5) Orders
- buyerId + date: histórico de pedidos por comprador (ordenado por data)
- status + date: filas/monitoramento por status em janelas temporais
- items.productId: agregações para total de vendas por produto/categoria (items é array)
Justificativa:
- buyerId+date: uso comum em histórico de compras, UI que mostra pedidos recentes primeiro.
- status+date: operações de suporte/monitoramento que listam pedidos por status e tempo.
- items.productId: necessário para agregações que unem orders -> produtos (vendas por produto/categoria).

6) Complementares para relatórios cruzando collections
- products.sellerId já criado; caso usemos $lookup com products a partir de orders/items, garante join rápido
- Se uso intenso de lookup orders.items.productId -> products._id, manter produtos com índice padrão _id (implícito) e idx_orders_items_productId.

Observações sobre performance e manutenção:
- Evitar índices desnecessários: cada índice custa em escrita e armazenamento.
- Monitorar com db.collection.getIndexes() e analisar explain() em queries pesadas.
- Para campos com muitas atualizações (ex: quantity), preferir evitar índices que não sejam necessários para consultas frequentes.
- Para buscas geográficas com filtros adicionais (categoria, preço), considerar índices compostos com {location: "2dsphere", categoryId:1} se a maioria das queries usar ambos (MongoDB exige que 2dsphere seja o prefixo em alguns casos de índice composto; revisar padrão de consultas antes de criar).
